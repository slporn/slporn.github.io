<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="new.css">
  <style type="text/css">
    /* CSS test */
  </style>
  <title></title>
</head>
<body>

  <div class='video-container' id='container'>
    <div class='post'>
      <video src="https://thumbs2.redgifs.com/ExtrasmallKindheartedBaleenwhale.mp4#t=0" autoplay="" loop="" class="post-video" playsinline webkit-playsinline muted></video>
    </div>
    <div class='post'>
      <video src="https://thumbs2.redgifs.com/StingyVigorousEmu.mp4#t=0" autoplay="" loop="" class="post-video" playsinline webkit-playsinline muted></video>
    </div>
    <div class='post'>
      <video src="https://thumbs2.redgifs.com/ExtrasmallKindheartedBaleenwhale.mp4#t=0" autoplay="" loop="" class="post-video" playsinline webkit-playsinline muted></video>
    </div>
    <div class='post'>
      <video src="https://thumbs2.redgifs.com/ExtrasmallKindheartedBaleenwhale.mp4#t=0" autoplay="" loop="" class="post-video" playsinline webkit-playsinline muted></video>
    </div>
    <div class="side-bar">
      <div class="side-icon profile-follow">
        <div class="profile-logo">
          <img src="https://assets.codepen.io/2483051/internal/avatars/users/default.png?fit=crop&format=auto&height=80&version=1636466200&width=80" class="profile-logo-img" alt="">
        </div>
        <i class="fa fa-plus"></i>
      </div>
      <div class="side-icon like-btn">
        <i class="fa fa-heart-o like-icon"></i>
        <p class="like-number">like</p>
      </div>

      <div class="side-icon comment-btn">
        <i class="fa fa-comment comment-icon"></i>
        <p class="comment-number">comment</p>
      </div>

      <div class="side-icon share-btn">
        <i class="fa fa-share share-icon" onclick="unmuteVideo();"></i>
        <p class="share-number">vol</p>
      </div>
    </div>
  </div>

</body>

</html>

<script src="template_new.js"></script>

<script type="text/javascript">

// And you would kick this off where appropriate with:

function playallVideo() {
    let videos = document.querySelectorAll("video");
    videos.forEach((video) => {
        // We can only control playback without insteraction if video is mute
        video.muted = false;
    });
}

function unmuteVideo() {
    let videos = document.querySelectorAll("video");
    videos.forEach((video) => {
        // We can only control playback without insteraction if video is mute
        video.muted = !video.muted;
    });
}

</script>

<script type="text/javascript">
  function scrolling() {
    var scroll_distance = document.querySelector('.video-container')
    var last_distance = $('.post:last').offset().top
    console.log(scroll_distance.scrollTop)
    console.log('it is scrolling');
    console.log(last_distance)

    
    if ( last_distance == 0 ) {
        var numItems = $('.post').length;
        if(numItems <= 20){
           $( ".video-container" ).append( '<div class="post">'
      + '<video src="https://thumbs2.redgifs.com/StingyVigorousEmu.mp4#t=0" loop="" class="post-video" playsinline webkit-playsinline></video>'
      + '</div>');
        }
   }
   scrolling()

  }
  var page = document.getElementById('container');
  var test = document.getElementById('5');

  // console.log(test.scrollTop);
  var distance = $('.post').offset().top;
  console.log(distance);

  page.addEventListener('scroll', scrolling);
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>

  
<script type="text/javascript">
function scrolling() {
  var videos = gsap.utils.toArray('video')
  videos.forEach(function(video, i) {
    ScrollTrigger.create({
      trigger: video,
      scroller: '.video-container',
      start: 'top center',
      end: 'bottom center',
      markers: false,
      onEnter: () => video.play(),
      onEnterBack: () => video.play(),
      onLeave: () => video.pause(),
      onLeaveBack: () => video.pause(),
    });

  })
}
scrolling()

</script>